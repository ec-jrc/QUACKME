/**
 * @license NgRx 9.1.0
 * (c) 2015-2018 Brandon Roberts, Mike Ryan, Rob Wormald, Victor Savkin
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("tslib"),require("@ngrx/store"),require("rxjs"),require("rxjs/operators"),require("@angular/core")):"function"==typeof define&&define.amd?define("@ngrx/effects",["exports","tslib","@ngrx/store","rxjs","rxjs/operators","@angular/core"],t):t(((e=e||self).ngrx=e.ngrx||{},e.ngrx.effects={}),e.tslib,e.ngrx.store,e.rxjs,e.rxjs.operators,e.ng.core)}(this,(function(e,t,r,n,o,f){"use strict";var c={dispatch:!0,useEffectsErrorHandler:!0};function i(e){return Object.getOwnPropertyNames(e).filter((function(t){return e[t]&&e[t].hasOwnProperty("__@ngrx/effects_create__")})).map((function(r){return t.__assign({propertyName:r},e[r]["__@ngrx/effects_create__"])}))}function u(e){return Object.getPrototypeOf(e)}function a(e){return r.compose(p,u)(e)}function s(e){return e.constructor.hasOwnProperty("__@ngrx/effects__")}function p(e){return s(e)?e.constructor["__@ngrx/effects__"]:[]}function _(e){return[a,i].reduce((function(t,r){return t.concat(r(e))}),[])}function d(e,r,f){var c=u(e).constructor.name,i=_(e).map((function(t){var n=t.propertyName,i=t.dispatch,u=t.useEffectsErrorHandler,a="function"==typeof e[n]?e[n]():e[n],s=u?f(a,r):a;return!1===i?s.pipe(o.ignoreElements()):s.pipe(o.materialize()).pipe(o.map((function(t){return{effect:e[n],notification:t,propertyName:n,sourceName:c,sourceInstance:e}})))}));return n.merge.apply(void 0,t.__spread(i))}function l(e,t,r){return void 0===r&&(r=10),e.pipe(o.catchError((function(n){return t&&t.handleError(n),r<=1?e:l(e,t,r-1)})))}var g=function(e){function o(t){var r=e.call(this)||this;return t&&(r.source=t),r}var c;return t.__extends(o,e),c=o,o.prototype.lift=function(e){var t=new c;return t.source=this,t.operator=e,t},c=t.__decorate([f.Injectable(),t.__param(0,f.Inject(r.ScannedActionsSubject)),t.__metadata("design:paramtypes",[n.Observable])],o)}(n.Observable);function m(e){return y(e,"ngrxOnInitEffects")}function y(e,t){return e&&t in e&&"function"==typeof e[t]}var E=new f.InjectionToken("@ngrx/effects Internal Root Guard"),x=(new f.InjectionToken("ngrx/effects: Immediate Effects"),new f.InjectionToken("ngrx/effects: User Provided Effects")),v=new f.InjectionToken("ngrx/effects: Internal Root Effects"),h=new f.InjectionToken("ngrx/effects: Root Effects"),j=new f.InjectionToken("ngrx/effects: Internal Feature Effects"),b=new f.InjectionToken("ngrx/effects: Feature Effects"),I=new f.InjectionToken("ngrx/effects: Effects Error Handler"),O=function(e){function r(t,r){var n=e.call(this)||this;return n.errorHandler=t,n.effectsErrorHandler=r,n}return t.__extends(r,e),r.prototype.addEffects=function(e){this.next(e)},r.prototype.toActions=function(){var e=this;return this.pipe(o.groupBy(u),o.mergeMap((function(e){return e.pipe(o.groupBy(S))})),o.mergeMap((function(t){var r=t.pipe(o.exhaustMap((function(t){return function r(e,t){return function(r){var n=d(r,e,t);return function o(e){return y(e,"ngrxOnRunEffects")}(r)?r.ngrxOnRunEffects(n):n}}(e.errorHandler,e.effectsErrorHandler)(t)})),o.map((function(t){return function r(e,t){if("N"===e.notification.kind){var r=e.notification.value;!function n(e){return"function"!=typeof e&&e&&e.type&&"string"==typeof e.type}(r)&&t.handleError(new Error("Effect "+function o(e){var t=e.propertyName,r="function"==typeof e.sourceInstance[t];return'"'+e.sourceName+"."+String(t)+(r?"()":"")+'"'}(e)+" dispatched an invalid action: "+function f(e){try{return JSON.stringify(e)}catch(t){return e}}(r)))}}(t,e.errorHandler),t.notification})),o.filter((function(e){return"N"===e.kind})),o.dematerialize()),f=t.pipe(o.take(1),o.filter(m),o.map((function(e){return e.ngrxOnInitEffects()})));return n.merge(r,f)})))},t.__decorate([f.Injectable(),t.__param(1,f.Inject(I)),t.__metadata("design:paramtypes",[f.ErrorHandler,Function])],r)}(n.Subject);function S(e){return function t(e){return y(e,"ngrxOnIdentifyEffects")}(e)?e.ngrxOnIdentifyEffects():""}var w=function(){function e(e,t){this.effectSources=e,this.store=t,this.effectsSubscription=null}return e.prototype.start=function(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))},e.prototype.ngOnDestroy=function(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)},t.__decorate([f.Injectable(),t.__metadata("design:paramtypes",[O,r.Store])],e)}(),M=r.createAction("@ngrx/effects/init"),N=function(){function e(e,t,r,n,o,f,c){this.sources=e,t.start(),n.forEach((function(t){return e.addEffects(t)})),r.dispatch({type:"@ngrx/effects/init"})}return e.prototype.addEffects=function(e){this.sources.addEffects(e)},t.__decorate([f.NgModule({}),t.__param(3,f.Inject(h)),t.__param(4,f.Optional()),t.__param(5,f.Optional()),t.__param(6,f.Optional()),t.__param(6,f.Inject(E)),t.__metadata("design:paramtypes",[O,w,r.Store,Array,r.StoreRootModule,r.StoreFeatureModule,Object])],e)}(),F=t.__decorate([f.NgModule({}),t.__param(1,f.Inject(b)),t.__param(2,f.Optional()),t.__param(3,f.Optional()),t.__metadata("design:paramtypes",[N,Array,r.StoreRootModule,r.StoreFeatureModule])],(function F(e,t,r,n){t.forEach((function(t){return t.forEach((function(t){return e.addEffects(t)}))}))})),R=function(){function e(){}return e.forFeature=function(e){return void 0===e&&(e=[]),{ngModule:F,providers:[e,{provide:j,multi:!0,useValue:e},{provide:x,multi:!0,useValue:[]},{provide:b,multi:!0,useFactory:T,deps:[f.Injector,j,x]}]}},e.forRoot=function(e){return void 0===e&&(e=[]),{ngModule:N,providers:[{provide:E,useFactory:k,deps:[[w,new f.Optional,new f.SkipSelf]]},{provide:I,useValue:l},w,O,g,e,{provide:v,useValue:[e]},{provide:x,multi:!0,useValue:[]},{provide:h,useFactory:T,deps:[f.Injector,v,x]}]}},t.__decorate([f.NgModule({})],e)}();function T(e,r,n){var o,f,c,i,u=[];try{for(var a=t.__values(r),s=a.next();!s.done;s=a.next())u.push.apply(u,t.__spread(s.value))}catch(e){o={error:e}}finally{try{s&&!s.done&&(f=a.return)&&f.call(a)}finally{if(o)throw o.error}}try{for(var p=t.__values(n),_=p.next();!_.done;_=p.next())u.push.apply(u,t.__spread(_.value))}catch(e){c={error:e}}finally{try{_&&!_.done&&(i=p.return)&&i.call(p)}finally{if(c)throw c.error}}return function d(e,t){return t.map((function(t){return e.get(t)}))}(e,u)}function k(e){if(e)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}e.Actions=g,e.EFFECTS_ERROR_HANDLER=I,e.Effect=function H(e){return void 0===e&&(e={}),function(r,n){!function o(e,t){s(e)?e.constructor["__@ngrx/effects__"].push(t):Object.defineProperty(e.constructor,"__@ngrx/effects__",{value:[t]})}(r,t.__assign(t.__assign(t.__assign({},c),e),{propertyName:n}))}},e.EffectSources=O,e.EffectsFeatureModule=F,e.EffectsModule=R,e.EffectsRootModule=N,e.EffectsRunner=w,e.ROOT_EFFECTS_INIT="@ngrx/effects/init",e.USER_PROVIDED_EFFECTS=x,e.act=function P(e,r){var f="function"==typeof e?{project:e,error:r,operator:o.concatMap,complete:void 0,unsubscribe:void 0}:t.__assign(t.__assign({},e),{operator:e.operator||o.concatMap}),c=f.project,i=f.error,u=f.complete,a=f.operator,s=f.unsubscribe;return function(e){return n.defer((function(){var t=new n.Subject;return n.merge(e.pipe(a((function(e,r){return n.defer((function(){var f=!1,a=!1,p=0;return c(e,r).pipe(o.materialize(),o.map((function(t){switch(t.kind){case"E":return a=!0,new n.Notification("N",i(t.error,e));case"C":return f=!0,u?new n.Notification("N",u(p,e)):void 0;default:return++p,t}})),o.filter((function(e){return null!=e})),o.dematerialize(),o.finalize((function(){f||a||!s||t.next(s(p,e))})))}))}))),t)}))}},e.createEffect=function A(e,r){var n=e(),o=t.__assign(t.__assign({},c),r);return Object.defineProperty(n,"__@ngrx/effects_create__",{value:o}),n},e.defaultEffectsErrorHandler=l,e.getEffectsMetadata=function V(e){return _(e).reduce((function(e,t){return e[t.propertyName]={dispatch:t.dispatch,useEffectsErrorHandler:t.useEffectsErrorHandler},e}),{})},e.mergeEffects=d,e.ofType=function q(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.filter((function(t){return e.some((function(e){return"string"==typeof e?e===t.type:e.type===t.type}))}))},e.rootEffectsInit=M,e.ɵngrx_modules_effects_effects_a=_,e.ɵngrx_modules_effects_effects_b=T,e.ɵngrx_modules_effects_effects_c=k,e.ɵngrx_modules_effects_effects_d=E,e.ɵngrx_modules_effects_effects_e=v,e.ɵngrx_modules_effects_effects_f=h,e.ɵngrx_modules_effects_effects_g=j,e.ɵngrx_modules_effects_effects_h=b,Object.defineProperty(e,"__esModule",{value:!0})}));